# Health Sync - Project Overview

## 1. Executive Summary
Health Sync is a comprehensive healthcare eco-system designed to bridge the gap between patients, healthcare providers, and emergency services. It utilizes a **Flutter mobile application** for patients and a **React-based web platform** for broader access (patients, doctors, hospitals). The system is powered by a **Supabase** backend, utilizing Edge Functions for AI-driven features like symptom triage and medical report analysis.

## 2. Project Architecture

### 2.1. Mobile Application (`/app`)
*   **Platform**: Android & iOS (Cross-platform via Flutter).
*   **Target Audience**: Patients / General Users.
*   **Key Responsibilities**:
    *   Personal Health Management (Timeline, Plans).
    *   AI Health Assistant (Voice/Text interaction).
    *   Blood Donation Requests & Donor Search.
    *   Authentication & Profile Management.

### 2.2. Web Application (`/web`)
*   **Platform**: Web (React + Vite).
*   **Target Audience**: Patients, Doctors, Hospitals, and Admins.
*   **Key Responsibilities**:
    *   **Patient Portal**: Web access to health data, similar to the mobile app.
    *   **Doctor Portal**: Appointment management, patient record viewing.
    *   **Hospital Portal**: Blood bank management, emergency coordination.
    *   **Admin/Dashboard**: centralized management.
    *   **Detailed Features**: Diagnostics, Uploads, specialized Doctor/Hospital/Blood modules.

### 2.3. Backend & Infrastructure (`/backend`)
*   **Core Backend**: **Supabase** (PostgreSQL, Auth, Storage, Realtime).
*   **Compute**: **Deno Edge Functions** for business logic and AI processing.
*   **AI Integration**: Functions for processing symptoms and parsing medical reports.
*   **Notifications**: Firebase Cloud Messaging (FCM) mapped to Supabase users.

---

## 3. Technology Stack Details

### 3.1. Mobile App (Flutter)
*   **Language**: Dart.
*   **Framework**: Flutter (SDK ^3.10.3).
*   **State Management**: `flutter_riverpod` (v2.6.1) - Ensures testable and scalable state handling.
*   **Routing**: `go_router` (v14.6.0) - Declarative routing.
*   **Data & Auth**: `supabase_flutter` (v2.8.0).
*   **UI/UX**: `google_fonts`, `font_awesome_flutter`, `timeline_tile` (for medical history), `carousel_slider`.
*   **Device Features**:
    *   `speech_to_text`: Voice interaction with AI Doctor.
    *   `image_picker` / `file_picker`: Uploading medical reports.
    *   `url_launcher`: External links.

### 3.2. Web App (React)
*   **Language**: TypeScript.
*   **Build Tool**: Vite.
*   **Framework**: React (v19.2.0).
*   **Routing**: `react-router-dom` (v7.12.0).
*   **Styling**: Likely CSS Modules or similar (structured in `src/styles` and `src/theme`).
*   **Icons**: `phosphor-react`.
*   **Internationalization**: `i18next` & `react-i18next` - Supports multiple languages.
*   **Utilities**: `date-fns` (Date manipulation), `framer-motion` (Animations).

### 3.3. Backend (Supabase)
*   **Database**: PostgreSQL (managed by Supabase).
*   **Edge Functions** (`backend/supabase/functions`):
    *   `triage-symptoms`: AI logic to assess user symptoms.
    *   `process-medical-report`: OCR/AI analysis of uploaded documents.
    *   `generate-health-plan`: Creates personalized plans based on history.
    *   `extract-blood-request`: Parses text to create structured blood requests.
    *   `notify-donors`: Triggers FCM notifications to relevant users.

---

## 4. Key Features Breakdown

### 4.1. AI Doctor & Health Assistant
*   **Functionality**: Users can chat (voice/text) with an AI to triage symptoms.
*   **Data Flow**: User Input -> Edge Function (`triage-symptoms`) -> AI Model -> Response -> App UI.
*   **Files**: `app/lib/features/ai_doctor`, `web/src/features/ai-doctor`.

### 4.2. Medical Timeline & Analysis
*   **Functionality**: Visual timeline of prescriptions, reports, and lab results.
*   **Innovation**: Uploading a PDF/Image report triggers `process-medical-report`, which extracts data, categorizes it, and assigns severity (HIGH, MEDIUM, NORMAL).
*   **Files**: `app/lib/features/timeline`, `web/src/features/timeline`, `web/src/features/diagnostic`.

### 4.3. Blood Donation Network
*   **Functionality**: Real-time donor search, blood requests, and hospital blood bank directory.
*   **Scope**: Connects individual donors with urgent needs.
*   **Files**: `app/lib/features/blood`, `web/src/features/blood` (includes specialized hospital views).

### 4.4. Personalized Health Plans
*   **Functionality**: AI-generated wellness strategies tailored to the user's medical history.
*   **Files**: `backend/supabase/functions/generate-health-plan`, `web/src/features/health-plan`.

### 4.5. Multi-Role Web Access
*   **Doctor Features**: Appointments, Patient Management (`web/src/features/doctor`).
*   **Hospital Features**: Blood bank management, Facility info (`web/src/features/hospital`).

---

## 5. Development Setup Tips
*   **Environment**: Requires both `.env` for the web app and build-time config for Flutter (or hardcoded keys if simple).
*   **Services**: Depends heavily on a live Supabase project. You need to link the local project to a remote Supabase instance to run Edge Functions.
*   **Google Services**: The Flutter app expects `google-services.json` (Android) and `GoogleService-Info.plist` (iOS) for Firebase functionalities.

## 6. Directory Structure Highlights
*   `app/lib/features`: Feature-first architecture (Clean Architecture style).
*   `web/src/features`: Mirrors the mobile app's feature structure but expands it for other roles (Doctor, Hospital).
*   `backend/supabase/functions`: The "Brain" of the operation, handling complex logic and AI interactions.
